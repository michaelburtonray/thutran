<% if @background %>
<% end %>

<% content_for :additional_css do %>
  <style type="text/css">
    html { background-image: url('<%= @background.image.url %>') }
    #lense { background-image: url('<%= @lense.image.url %>') }
  </style>
<% end %>

<div id="background-info" data-image-width="<%= @background.image_dimensions[0] %>" data-image-height="<%= @background.image_dimensions[1] %>" data-lense-width="<%= @lense.image_dimensions[0] %>" data-lense-height="<%= @lense.image_dimensions[1] %>"></div>

<% if @lenticulars.any? %>
  <% @lenticulars.each do |lenticular| %>

    <article class="lenticular" id="lenticular_<%= lenticular.id %>" style="<%= lenticular.position == 0 ? "margin-top: calc(50vh - #{lenticular.image_dimensions[1]/2}px)" : nil %>">
      <% if lenticular.anchor_hyperlink_reference.length > 0 %>
        <a  class="image" href="<%= lenticular.anchor_hyperlink_reference %>" target="_blank" style="background-image: url('<%= lenticular.image.url %>'); max-width: <%= lenticular.image_dimensions[0] %>px; height: <%= lenticular.image_dimensions[1] %>px" data-width="<%= lenticular.image_dimensions[0] %>" data-height="<%= lenticular.image_dimensions[1] %>">
        </a>
      <% else %>
        <div class="image" style="background-image: url('<%= lenticular.image.url %>'); max-width: <%= lenticular.image_dimensions[0] %>px; height: <%= lenticular.image_dimensions[1] %>px" data-width="<%= lenticular.image_dimensions[0] %>" data-height="<%= lenticular.image_dimensions[1] %>">
        </div>
      <% end %>
    </article>


  <% end %>

<% else %>

  <p>no lenticulars to display</p>

<% end %>

